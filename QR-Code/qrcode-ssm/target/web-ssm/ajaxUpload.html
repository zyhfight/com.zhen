<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="static/util/js/ajaxUpload/jquery.js"></script>
    <script type="text/javascript" src="static/util/js/ajaxUpload/ajaxupload.js"></script>
    <script type="text/javascript">
        $(function(){
            //上传图片
            new AjaxUpload('#addLabProdPic', {
                action: 'qr_code/upload_file',
                name: 'picFile',
                responseType: 'json',
                onSubmit : function(file , ext){
                    if (ext && /^(jpg|png|bmp)$/.test(ext.toLowerCase())){
                        this.setData({
                            'picName': file
                        });
                    } else {
                        alert("请上传格式为 jpg|png|bmp 的图片！");
                        return false;
                    }
                },
                onComplete : function(file,response){
                    if(response.error) {
                        alert(response.error);
                        return;
                    }

                    console.log(response.baseStr);

                    $('#viewImg').attr('src',"data:imge/jpg;base64," + response.baseStr);
                }
            });
        })
    </script>
</head>
<body>

    <h1>Ajax文件上传例子,选择图片后立即上传,无需点击上传按钮</h1>
    <button id="addLabProdPic">选择图片</button>
    <br>
    <img id="viewImg">

</body>
</html>